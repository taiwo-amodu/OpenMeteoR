---
title: "Weather Forecasting with OpenMeteoR"
author: "Taiwo Amodu"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Weather Forecasting with OpenMeteoR}
  %\VignetteEngine{rmarkdown::html_vignette}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(OpenMeteoR)
```

## Introduction

The `OpenMeteoR` package provides a lightweight interface to retrieve weather forecasts from the [Open-Meteo API](https://open-meteo.com/). It is designed to be easy to use and does not require an API key.

With this package, users can:

- Get weather forecasts using geographic coordinates (latitude and longitude)
- Get weather forecasts using a location name (city/town)
- Plot forecast data (temperature highs/lows and precipitation)

This vignette demonstrates the core functionality of the package using reproducible examples.

## Getting Started

To use `OpenMeteoR`, simply load the package after installation:

```r
library(OpenMeteoR)
```

You can install the package from source using:

```r
install.packages("OpenMeteoR_0.1.0.tar.gz", repos = NULL, type = "source")
```

## Forecast by Coordinates

You can fetch the daily forecast for a location using its **latitude and longitude**.

```r
forecast <- get_forecast(lat = 48.8566, lon = 2.3522, days = 3)  # Paris, 3-day forecast
print(forecast)
```

Expected output:

```
        date temp_max temp_min precipitation
1 2025-07-11     29.4     18.6             0
2 2025-07-12     28.8     18.4             0
3 2025-07-13     31.4     17.5             0
```

## Forecast by Location Name

Instead of coordinates, you can simply provide a city or town name:

```r
forecast <- get_forecast_by_location("Berlin", days = 3)
print(forecast)
```

Internally, this function uses the OpenStreetMap Nominatim API to geocode the location and pass the coordinates to the forecast function.

## Visualizing the Forecast

Use `plot_forecast()` to generate a clean line and bar plot of the forecast:

```r
plot_forecast(forecast)
```

This produces a dual-axis plot showing temperature trends and precipitation amounts over the forecast period.

## How It Works

### Geocoding with Nominatim

The function `get_forecast_by_location()` uses:

```r
request("https://nominatim.openstreetmap.org/search")
```

To convert a place name into geographic coordinates.

### Weather Data from Open-Meteo

The function `get_forecast()` queries:

```
https://api.open-meteo.com/v1/forecast
```

...to retrieve daily forecasts including:

- `temperature_2m_max`
- `temperature_2m_min`
- `precipitation_sum`

## Dependencies

The package uses the following libraries:

- `httr2`: For making API requests
- `jsonlite`: For parsing JSON responses
- `ggplot2`: For plotting
- `utils`: For declaring global variables to suppress CMD check warnings

All dependencies are declared in the `DESCRIPTION` file.

## Limitations

- Only daily forecasts are supported
- The accuracy of geocoding depends on Nominatim results
- Internet connection is required for all functions

## Summary

`OpenMeteoR` is a simple, intuitive package to fetch and visualize weather forecasts using either geographic coordinates or place names, powered by Open-Meteo and OpenStreetMap APIs â€” all without needing API keys.

Use this package to build dashboards, enrich datasets, or just stay informed about the weather in your city.

## Session Info

```{r session-info}
sessionInfo()
```
